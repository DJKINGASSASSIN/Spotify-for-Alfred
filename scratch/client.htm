<html>
<body>
<script type="text/javascript" src="reconnecting-websocket.js"></script>
<script type="text/javascript">
try {
	socket = new ReconnectingWebSocket('ws://localhost:10000');
	console.log('Created WebSocket - status '+ socket.readyState);

	socket.onopen    = function(msg){
		console.log("Connection opened; awaiting notification of what's needed"); 
	};

	socket.onmessage = function(msg){ 
		console.log("Received: " + msg.data);

		if(msg.data == "close") {
			console.log("Closing per server order!");
			socket.close();
		}

		if (msg.data !== "Got your message!\n") {
			console.log("Responding with requested data");
			socket.send("Here you go: " + msg.data);
		}
	};

	socket.onclose   = function(msg){
		console.log("Disconnected - status "+this.readyState); 
	};
}
catch(ex) {
	console.log(ex);
}
</script>
</body>
</html>